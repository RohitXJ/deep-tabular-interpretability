{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-center">
  <ul class="nav nav-pills nav-fill gap-2 p-1 small bg-light border rounded-5 shadow-sm" style="--bs-nav-link-color: var(--bs-secondary-color); --bs-nav-pills-link-active-color: var(--bs-primary-color-rgb); --bs-nav-pills-link-active-bg: var(--bs-white);">
    <li class="nav-item">
      <button class="nav-link rounded-5" type="button">1. Upload</button>
    </li>
    <li class="nav-item">
      <button class="nav-link rounded-5" type="button">2. Configure</button>
    </li>
    <li class="nav-item">
      <button class="nav-link rounded-5" type="button">3. Results</button>
    </li>
     <li class="nav-item">
      <button class="nav-link rounded-5" type="button">4. Interpretation</button>
    </li>
  </ul>
</div>
<hr>

<h4 class="card-title text-center mb-4">Step 1: Upload Your Dataset</h4>
<form id="upload-form" method="POST" enctype="multipart/form-data" novalidate>
    {{ form.hidden_tag() }}
    <div class="mb-3">
        <label for="csv_file" class="form-label">{{ form.csv_file.label }}</label>
        {{ form.csv_file(class="form-control", id="csv_file") }}
        {% if form.csv_file.errors %}
            <div class="invalid-feedback d-block">
                {% for error in form.csv_file.errors %}
                    <span>{{ error }}</span>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    <div class="d-flex justify-content-center">
        <button type="submit" class="btn btn-primary">
            <span id="submit-text">Upload and Proceed</span>
            <div id="loading-spinner" class="spinner-border spinner-border-sm text-light d-none" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </button>
    </div>
</form>

<script>
    document.getElementById('upload-form').addEventListener('submit', function() {
        document.getElementById('submit-text').classList.add('d-none');
        document.getElementById('loading-spinner').classList.remove('d-none');
    });
</script>
{% endblock %}
